# Product Search REST Service - http://localhost:8080

Product Search REST Service is designed to provide following endpoints:
1. /allProducts - GET
2. /product/{item} - GET
3. /search/{text} - GET
4. /stop - GET
5. /documentation - GET Auto generated by Hapi-Swagger for above 4 exposed endpoints

## Endpoints

### /allProducts

This is an endpoint that provides the list of all the product codes available on https://gist.githubusercontent.com/daniyalzade/8e32cd266aebd6d2ce35/raw/f8c6b89f9cfafdbb3db7b653a6354c9f5b7b106d/data_file.csv

### /product/{item}

This endpoint provides product details for a give productCode (item).

### /search/{text}

This is the endpoint, which is the primary focus of this exercise. It returns an array of Product Codes for a given search text.

### /stop

As the endpoint alludes, this stops the server.

----

## Technology/Framework used

1. Nodejs
2. NPM
3. Chai
4. Mocha
5. Nock
6. Nodemon
7. Istanbul
8. Async
9. Hapi
10. Hapi-Swagger
11. Inert
12. Joi
13. Request
14. Vision

----

## Code Structure

Application has been laid out in a simple folder structure mimicing the use.

~~~~
<root>
  |
  |- src
  |  |- app.js            // Starting point of this application.
  |  |- server
  |  |  |- server.js      // Main module that manages the server, routes and basic handlers.
  |  |- api
  |  |  |- search.js      // Main focus of this exercise, thus in apis folder. All other endpoints are optional.
  |  |- helper
  |  |  |- allProducts.js // Static file that maintains the list of all the product codes available on data_file.csv
  |  |  |- config.js      // Configuraton file for providing correct URLs.
  |  |  |- product.js     // Critical module that fetches details about a product code. Used both in /search/{text} and /product/{item}
  |  |- routes
  |  |  |- routes.js      // Started to be a possible container for routing information, but abandoned for triviality of the use case. Still leaving here to highlight the possible use-case.
  |  |
  |- test
  |  | ---- All the files in this folder are created to test the corresponding file.
~~~~

----

## Performance

### Response Times Analysis

With a random delay of `var timeout = 400 + Math.floor(Math.random() * 200) + 1;` milliseconds.

Response time:

~~~~
Request Count:   1
Bytes Sent:      448		(headers:448; body:0)
Bytes Received:  223		(headers:195; body:28)

ACTUAL PERFORMANCE
--------------
ClientConnected:	11:18:13.923
ClientBeginRequest:	11:24:20.748
GotRequestHeaders:	11:24:20.748
ClientDoneRequest:	11:24:20.748
Determine Gateway:	0ms
DNS Lookup: 		0ms
TCP/IP Connect:	0ms
HTTPS Handshake:	0ms
ServerConnected:	11:24:20.749
FiddlerBeginRequest:	11:24:20.749
ServerGotRequest:	11:24:20.749
ServerBeginResponse:	11:24:32.904
GotResponseHeaders:	11:24:32.904
ServerDoneResponse:	11:24:32.904
ClientBeginResponse:	11:24:32.904
ClientDoneResponse:	11:24:32.904

	Overall Elapsed:	0:00:12.155

RESPONSE BYTES (by Content-Type)
--------------
       ~headers~: 195
application/json: 28


ESTIMATED WORLDWIDE PERFORMANCE
--------------
The following are VERY rough estimates of download times when hitting servers based in Seattle.

US West Coast (Modem - 6KB/sec)
	RTT:		0.10s
	Elapsed:	0.10s

Japan / Northern Europe (Modem)
	RTT:		0.15s
	Elapsed:	0.15s

China (Modem)
	RTT:		0.45s
	Elapsed:	0.45s

US West Coast (DSL - 30KB/sec)
	RTT:		0.10s
	Elapsed:	0.10s

Japan / Northern Europe (DSL)
	RTT:		0.15s
	Elapsed:	0.15s

China (DSL)
	RTT:		0.45s
	Elapsed:	0.45s


________________
Learn more about HTTP performance at http://fiddler2.com/r/?HTTPPERF
~~~~

With a static delay of `var timeout = 100;` milliseconds.

Response time:

~~~~
Request Count:   1
Bytes Sent:      448		(headers:448; body:0)
Bytes Received:  291		(headers:227; body:64)

ACTUAL PERFORMANCE
--------------
ClientConnected:	11:32:49.223
ClientBeginRequest:	11:32:49.225
GotRequestHeaders:	11:32:49.225
ClientDoneRequest:	11:32:49.225
Determine Gateway:	0ms
DNS Lookup: 		0ms
TCP/IP Connect:	0ms
HTTPS Handshake:	0ms
ServerConnected:	11:32:49.226
FiddlerBeginRequest:	11:32:49.226
ServerGotRequest:	11:32:49.226
ServerBeginResponse:	11:32:53.823
GotResponseHeaders:	11:32:53.823
ServerDoneResponse:	11:32:53.823
ClientBeginResponse:	11:32:53.823
ClientDoneResponse:	11:32:53.823

	Overall Elapsed:	0:00:04.597

RESPONSE BYTES (by Content-Type)
--------------
       ~headers~: 227
application/json: 64


ESTIMATED WORLDWIDE PERFORMANCE
--------------
The following are VERY rough estimates of download times when hitting servers based in Seattle.

US West Coast (Modem - 6KB/sec)
	RTT:		0.10s
	Elapsed:	0.10s

Japan / Northern Europe (Modem)
	RTT:		0.15s
	Elapsed:	0.15s

China (Modem)
	RTT:		0.45s
	Elapsed:	0.45s

US West Coast (DSL - 30KB/sec)
	RTT:		0.10s
	Elapsed:	0.10s

Japan / Northern Europe (DSL)
	RTT:		0.15s
	Elapsed:	0.15s

China (DSL)
	RTT:		0.45s
	Elapsed:	0.45s


________________
Learn more about HTTP performance at http://fiddler2.com/r/?HTTPPERF

~~~~